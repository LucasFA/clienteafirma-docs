<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>AF Firmar AutoFirma OS X - My Docs</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "AF Firmar AutoFirma OS X";
        var mkdocs_page_input_path = "markdown_strict/AF_Firmar_AutoFirma_OS_X.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> My Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Welcome to MkDocs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Markdown strict</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Firmar_AutoFirma_Linux/">AF Firmar AutoFirma Linux</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">AF Firmar AutoFirma OS X</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Instalador%20Linux/">Preparación del entorno</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Instalador%20Mac%20OS%20X/">AF Instalador Mac OS X</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Instalador%20Windows/">AF Instalador Windows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_manual_desarrollo_plugins_ES/">AF manual desarrollo plugins ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_manual_instalacion_usuarios_ES/">AF manual instalacion usuarios ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_manual_instalacion_y_gestion_ES/">AF manual instalacion y gestion ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ANEXO_Firma-electronica-en-varias-fases/">Firma electrónica en tres fases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_arquitectura_ES/">CF arquitectura ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_catalogo_aplicaciones/">CF catalogo aplicaciones</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_distribuciones/">CF distribuciones</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_funcional_ES/">CF funcional ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_guia-incidencias/">CF guia incidencias</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_guia-uso-interfaz/">CF guia uso interfaz</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_guia-uso/">CF guia uso</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-firmas-pdf/">CF manual firmas pdf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-firmas-xml/">CF manual firmas xml</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-integrador/">CF manual integrador</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-migracion/">CF manual migracion</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual_integracion_modulos_ES/">CF manual integracion modulos ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_plan-pruebas/">CF plan pruebas</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_roadmap_ES/">CF roadmap ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Comunicacion_Navegador_y_App_en_Entorno_Movil/">El camino de ida: Desde el navegador Web hacia la App</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DECLARACION_ACCESIBILIDAD/">Declaración de Accesibilidad</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Diagramas%20de%20secuencia%20de%20los%20procesos%20de%20firma%20m%C3%B3vil/">Firma monofásica (Windows 8 / Windows RT y Android)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Firma_por_lotes_predefinidos_con_el_MiniApplet_Cliente/">Firma por lotes predefinidos con el MiniApplet Cliente</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Informe%20-%20Alternativas_Applets_para_firma/">Informe   Alternativas Applets para firma</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Invocaci%C3%B3n%20por%20protocolo%20de%20aplicaciones%20nativas%20desde%20p%C3%A1ginas%20Web/">¿Qué es la invocación por protocolo?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../La_seguridad_en_el_Servicio_de_firma_del_Cliente/">Tabla de contenido</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MCF_manual-integrador_ES/">MCF manual integrador ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MCF_roadmap_ES/">MCF roadmap ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Manual%20para%20la%20configuraci%C3%B3n%20de%20los%20campos%20de%20firma%20para%20la%20aplicaci%C3%B3n%20de%20firma%20manuscrita%20en%20tableta/">Manual para la configuración de los campos de firma para la aplicación de firma manuscrita en tableta</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PF_Manual_App_Portafirmas_Android/">PF Manual App Portafirmas Android</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PF_Manual_App_Portafirmas_iOS/">PF Manual App Portafirmas iOS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PF_manual-configuracion_servicios_ES/">PF manual configuracion servicios ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Sintaxis_invocacion_Cliente_Afirma/">Sintaxis invocacion Cliente Afirma</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../afirma_movil_intro/"><<img src="media/image1.jpeg"</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">My Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Markdown strict</li>
      <li class="breadcrumb-item active">AF Firmar AutoFirma OS X</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>Las aplicaciones OS X (<em>.app</em>) pueden ir firmadas, al igual que lo
pueden ir sus instaladores (<em>.pkg</em>). Sin embargo, el proceso de firma de
AutoFirma, debido a su naturaleza de aplicación Java y su mecanismo de
instalación presenta varias particularidades.</p>
<p>El proceso de empaquetado y firma de AutoFirma para OS X, requiere:</p>
<ul>
<li>
<p>Firma de los archivos JAR “AutoFirma.jar” y
    “AutoFirmaConfigurador.jar”.</p>
</li>
<li>
<p>Empaquetado de los JAR firmados en una aplicación (<em>.app</em>).</p>
</li>
<li>
<p>Empaquetado de la aplicación (<em>.app</em>) en un paquete instalador
    (<em>.pkg</em>).</p>
</li>
<li>
<p>Firma del paquete instalador (<em>.pkg</em>)</p>
</li>
</ul>
<p>A continuación se describen los distintos procesos de firma involucrados
(incluido el proceso de firma del <em>.app</em> que NO se debe llevar a cabo).</p>
<h1 id="firma-de-los-jar-de-autofirma">Firma de los JAR de AutoFirma</h1>
<p>El proceso de firma de firma de los JAR de AutoFirma OS X es el mismo
que en el resto de sistemas operativos. Se deberán firmar los ficheros
“AutoFirma.jar” y “AutoFirmaConfigurator.jar”.</p>
<p>Se puede revisar la documentación del comando de firma en el siguiente
enlace:</p>
<p><a href="http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jarsigner.html">http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jarsigner.html</a></p>
<h1 id="firma-de-la-app">Firma de la APP</h1>
<p>Aunque las aplicaciones OS X pueden ir firmadas, <strong>no se debe firmar la
aplicación AutoFirma para OS X</strong>.</p>
<p>Las aplicaciones OS X (<em>.app</em>) consisten en un directorio con nombre
terminado en “.app”, lo que hace que el sistema de ventanas lo presente
como un fichero. Este directorio dispone de una estructura de ficheros
determinada y puede ser firmado. Sin embargo, durante el proceso de
instalación de AutoFirma es necesario que se creen nuevos ficheros
dentro del directorio <em>.app</em> lo que hace que las firmas sobre este
directorio (realizadas antes del empaquetado en el instalador) aparezcan
corruptas. Por este motivo, no se firmará el <em>.app</em> en OS X.</p>
<h1 id="firma-del-pkg">Firma del PKG</h1>
<p>Para firmar el fichero <em>.pkg</em> será necesario disponer de un equipo OS X
y un certificado de desarrollador expedido por Apple válido para la
distribución de aplicaciones OS X. Para comprobar que el certificado sea
válido, hay que abrir Xcode -&gt; Preferencias -&gt; Cuentas.
Seleccionar el ID de la cuenta de desarrollador en el panel de la
izquierda, y el nombre del perfil en el panel de la derecha. Una vez
seleccionados pulsar el botón inferior “Ver detalles…”</p>
<p>&lt;<img src="media/image1.png"
style="width:6.09375in;height:4.03125in"
alt="D:\instalador os x\Captura de pantalla 2016-05-27 a las 11.04.53.png" /></p>
<p>En el panel de identidades de firma debe estar creada la opción
“Developer ID installer”, en caso de no estar creado, pulsar el botón de
la derecha “Crear”, y se importará automáticamente el certificado en el
llavero.&lt;<img src="media/image2.png"
style="width:6.125in;height:4.10417in"
alt="D:\instalador os x\Captura de pantalla 2016-05-27 a las 10.54.01.png" /></p>
<p>El certificado debe estar importado en el llavero como se muestra a
continuación. (consulte con Apple para más información).</p>
<p>Para firmar hay que ejecutar el siguiente comando (el nombre del
instalador firmado se puede modificar):</p>
<p><strong>productsign –sign &lt;Nombre certificado&gt; &lt;original.pkg&gt;
&lt;firmado.pkg&gt;</strong></p>
<ul>
<li>
<p>&lt;<strong><em>Nombre certificado</em></strong>&gt; Nombre del certificado tal como
    aparece en el llavero de OS X (podemos observarlo en la siguiente
    imagen).</p>
</li>
<li>
<p>&lt;<img src="media/image3.png"
    style="width:6.48958in;height:1.3125in"
    alt="D:\instalador os x\Captura de pantalla 2016-05-27 a las 10.54.35.png" />&lt;<strong><em>original.pkg</em></strong>&gt;
    Nombre del fichero <em>.pkg</em> que queremos firmar.</p>
</li>
<li>
<p>&lt;<strong><em>firmado.pkg</em></strong>&gt; Nombre del <em>.pkg</em> firmado (No tiene por
    qué ser el mismo nombre que el original).</p>
</li>
</ul>
<p>Ejemplo:</p>
<blockquote>
<p><strong>productsign –sign “Developer ID installer: Ministerio de Hacienda y
Administraciones Públicas (2H36E8KFN2)” ./Desktop/test/”Cliente @firma
para OS X.pkg” AutoFirma_1.4.2_installer_signed.pkg</strong></p>
</blockquote>
<p>&lt;<img src="media/image4.png"
style="width:6.5in;height:0.26042in"
alt="D:\instalador os x\Captura de pantalla 2016-05-27 a las 10.55.40.png" /></p>
<p>Si todo ha ocurrido sin problemas se mostrarán los siguientes mensajes:</p>
<blockquote>
<p><strong>productsign: adding certificate “Apple Application Integration
Certification Authority”</strong></p>
<p><strong>productsign: adding certificate “Apple Root CA”</strong></p>
<p><strong>productsign: Wrote signed_product archive to
AutoFirma_1.4.2_installer_signed.pkg</strong></p>
</blockquote>
<p>Para una información más detallada sobre el comando <strong><em>productsign</em></strong> y
sus parámetros consultar la ayuda de Apple:</p>
<p><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/productsign.1.html">https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/productsign.1.html</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../AF_Firmar_AutoFirma_Linux/" class="btn btn-neutral float-left" title="AF Firmar AutoFirma Linux"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../AF_Instalador%20Linux/" class="btn btn-neutral float-right" title="Preparación del entorno">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../AF_Firmar_AutoFirma_Linux/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../AF_Instalador%20Linux/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>

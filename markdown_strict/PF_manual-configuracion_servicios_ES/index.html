<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>PF manual configuracion servicios ES - My Docs</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "PF manual configuracion servicios ES";
        var mkdocs_page_input_path = "markdown_strict/PF_manual-configuracion_servicios_ES.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> My Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Welcome to MkDocs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Markdown strict</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Firmar_AutoFirma_Linux/">AF Firmar AutoFirma Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Firmar_AutoFirma_OS_X/">AF Firmar AutoFirma OS X</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Instalador%20Linux/">Preparación del entorno</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Instalador%20Mac%20OS%20X/">AF Instalador Mac OS X</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_Instalador%20Windows/">AF Instalador Windows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_manual_desarrollo_plugins_ES/">AF manual desarrollo plugins ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_manual_instalacion_usuarios_ES/">AF manual instalacion usuarios ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../AF_manual_instalacion_y_gestion_ES/">AF manual instalacion y gestion ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ANEXO_Firma-electronica-en-varias-fases/">Firma electrónica en tres fases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_arquitectura_ES/">CF arquitectura ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_catalogo_aplicaciones/">CF catalogo aplicaciones</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_distribuciones/">CF distribuciones</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_funcional_ES/">CF funcional ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_guia-incidencias/">CF guia incidencias</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_guia-uso-interfaz/">CF guia uso interfaz</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_guia-uso/">CF guia uso</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-firmas-pdf/">CF manual firmas pdf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-firmas-xml/">CF manual firmas xml</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-integrador/">CF manual integrador</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual-migracion/">CF manual migracion</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_manual_integracion_modulos_ES/">CF manual integracion modulos ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_plan-pruebas/">CF plan pruebas</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CF_roadmap_ES/">CF roadmap ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Comunicacion_Navegador_y_App_en_Entorno_Movil/">El camino de ida: Desde el navegador Web hacia la App</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DECLARACION_ACCESIBILIDAD/">Declaración de Accesibilidad</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Diagramas%20de%20secuencia%20de%20los%20procesos%20de%20firma%20m%C3%B3vil/">Firma monofásica (Windows 8 / Windows RT y Android)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Firma_por_lotes_predefinidos_con_el_MiniApplet_Cliente/">Firma por lotes predefinidos con el MiniApplet Cliente</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Informe%20-%20Alternativas_Applets_para_firma/">Informe   Alternativas Applets para firma</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Invocaci%C3%B3n%20por%20protocolo%20de%20aplicaciones%20nativas%20desde%20p%C3%A1ginas%20Web/">¿Qué es la invocación por protocolo?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../La_seguridad_en_el_Servicio_de_firma_del_Cliente/">Tabla de contenido</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MCF_manual-integrador_ES/">MCF manual integrador ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MCF_roadmap_ES/">MCF roadmap ES</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Manual%20para%20la%20configuraci%C3%B3n%20de%20los%20campos%20de%20firma%20para%20la%20aplicaci%C3%B3n%20de%20firma%20manuscrita%20en%20tableta/">Manual para la configuración de los campos de firma para la aplicación de firma manuscrita en tableta</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PF_Manual_App_Portafirmas_Android/">PF Manual App Portafirmas Android</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PF_Manual_App_Portafirmas_iOS/">PF Manual App Portafirmas iOS</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">PF manual configuracion servicios ES</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#servicio-proxy">Servicio Proxy</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#configuracion-del-servicio">Configuración del servicio</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configuracion-de-los-logs">Configuración de los logs</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#configuracion-de-los-logs_1">Configuración de los logs</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#servicio-de-firma-trifasica">Servicio de firma trifásica</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#configuracion-del-servicio_1">Configuración del servicio</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Sintaxis_invocacion_Cliente_Afirma/">Sintaxis invocacion Cliente Afirma</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../afirma_movil_intro/"><<img src="media/image1.jpeg"</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">My Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Markdown strict</li>
      <li class="breadcrumb-item active">PF manual configuracion servicios ES</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>El Portafirmas móvil es una <em>app</em> para dispositivos móviles que permite
realizar las operaciones más destacadas del Portafirmas web del Mineco.
Esta app sirve únicamente como interfaz del Portafirmas web, de tal
forma que toda la lógica se mantiene en servidor a excepción de la
operación de firma, que se realiza con el certificado que el usuario
tiene instalado en el dispositivo y con el que accede a la aplicación.</p>
<p>Las operaciones que permite realizar el Portafirmas móvil es:</p>
<ul>
<li>
<p>Listado de solicitudes de firma (pendientes, firmadas y rechazadas).</p>
</li>
<li>
<p>Visualización del detalle de las peticiones.</p>
</li>
<li>
<p>Visualización de los documentos de las peticiones y de las firmas e
    informes de las peticiones ya firmadas.</p>
</li>
<li>
<p>Firma, visto bueno y validación de peticiones.</p>
</li>
<li>
<p>Rechazo de peticiones.</p>
</li>
<li>
<p>Gestión de validadores y autorizaciones del usuario.</p>
</li>
</ul>
<p>Para la ejecución de estas operaciones, el Portafirmas móvil requiere de
una serie de servicios web. El presente manual trata de la configuración
de estos servicios.</p>
<h1 id="servicios-del-portafirmas-movil">Servicios del Portafirmas móvil</h1>
<p>La solución de Portafirmas móvil se soporta en una serie de servicios
que le permiten comunicarse con el Portafirmas web y realizar las
distintas operaciones de firma. Estos son los servicios de proxy y de
firma trifásica del Cliente @firma, respectivamente.</p>
<h2 id="servicio-proxy">Servicio Proxy</h2>
<p>El servicio proxy del portafirmas web es el que se encarga de recoger
las peticiones del Portafirmas móvil y redirigirlas al Portafirmas Web
y/o al servicio de firma trifásica cuando se trate de operaciones de
firma.</p>
<p>Este servicio se distribuye mediante el archivo
afirma-signfolder-proxy.war.</p>
<h3 id="configuracion-del-servicio">Configuración del servicio</h3>
<p>El servicio de proxy se configura a través del fichero
pfmovil.properties. El servicio buscará este fichero en el directorio
configurado mediante la propiedad Java <em>pfmovil.config.path</em>. Si no se
configurase esta propiedad o no se encontrase en el directorio
establecido, se buscará dentro del WAR del servicio
(afirma-signfolder-proxy.war), en el subdirectorio “WEB-INF/classes”.</p>
<p>Para establecer el directorio de configuración, se podría proporcionar
la propiedad directamente al servidor de aplicaciones durante el
arranque. Por ejemplo:</p>
<p>-Dpfmovil.config.path=/opt/usuarios/portafirmas/config</p>
<p>Las propiedades que se pueden configurar desde este fichero son:</p>
<ul>
<li>
<p><em>signfolder.ws.url</em></p>
<ul>
<li>
<p>Indica cual es la URL de los servicios web del Portafirmas que
    dan soporte al Portafirmas móvil. La URL debe apuntar al WSDL
    publicado.</p>
</li>
<li>
<p>Ejemplo:</p>
<ul>
<li>https://mihost.com/pf/servicesv2/MobileService?wsdl</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>proxy.server.url</em></p>
<ul>
<li>
<p>URL base en el que se despliega el proxy del portafirmas.
    Necesario para las redirecciones en las autenticaciones con
    Cl@ve.</p>
</li>
<li>
<p>Ejemplo:</p>
<ul>
<li>https://mihost.com/pf/afirma-signfolder-proxy</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>triphase.server.url</em></p>
<ul>
<li>Indica la URL del servicio de firma trifásica.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>IMPORTANTE:</strong> La ruta de acceso al servidor trifásico debería ser
interna cuando ambos se encuentren en el mismo servidor, evitando que
la comunicación entre ambos servicios deba salir de la red o atravesar
cualquier proxy.</p>
</blockquote>
<ul>
<li>
<p>En caso de que el servicio cambiase de puerto en cada ejecución del
    servidor de aplicaciones, es posible utilizar el símbolo
    “${tomcat.httpport}” para cargar el puerto establecido en la
    variable de entorno Java “tomcat.httpport”.</p>
</li>
<li>
<p>Ejemplo:</p>
<ul>
<li>http://192.168.1.24:${tomcat.httpport}/afirma-server-triphase-signer/SignatureService</li>
</ul>
</li>
</ul>
<!-- -->

<ul>
<li>
<p><em>forced.extraparams</em></p>
<ul>
<li>
<p>Permite establecer parámetros de configuración que se
    establecerán para TODAS las firmas que se realicen a través del
    Portafirmas móvil. Estas propiedades se agregarán a las
    especificadas para cada documento y sustituirán a aquellas que
    se estableciese en origen.</p>
</li>
<li>
<p>Los parámetros se establecerán como una cadena de pares
    “clave=valor”. Las distintas propiedades se separarán con el
    carácter punto y coma (‘;’).</p>
</li>
<li>
<p>Por defecto:</p>
<ul>
<li>mode=implicit (Todas las firmas será implícitas)</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>cache.enabled</em></p>
<ul>
<li>
<p>Habilita la cache para conservar los documentos entre las
    operaciones de prefirma y postfirma en lugar de tener que
    recuperarlo del Portafirmas en cada ocasión. Habilitar esta
    opción habitualmente reducirá la velocidad del servicio y
    reducirá el tráfico de red entre el servicio proxy y el
    Portafirmas. Su desempeño dependerá de la implementación del
    sistema de caché.</p>
</li>
<li>
<p>Por defecto:</p>
<ul>
<li>false</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>cache.system.expirationtime</em></p>
<ul>
<li>
<p>Número de milisegundos que deben transcurrir para considerar
    caducado un fichero en cache. A partir de ese momento el
    servicio podrá borrarlo.</p>
</li>
<li>
<p>Por defecto:</p>
<ul>
<li>60000 (1 minuto)</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>cache.system.class</em></p>
<ul>
<li>
<p>Nombre de la clase que gestiona la cache. Sólo se utiliza si la
    cache está habilitada.</p>
</li>
<li>
<p>Opciones disponibles:</p>
<ul>
<li>
<p>es.gob.afirma.signfolder.server.proxy.FileSystemDocumentCache</p>
<ul>
<li>Almacena los documentos temporalmente en el sistema de
    ficheros. En caso de desplegarse el servicio en alta
    disponibilidad, se debería utilizar una unidad
    compartida por todos los nodos.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Por defecto:</p>
<ul>
<li>es.gob.afirma.signfolder.server.proxy.FileSystemDocumentCache</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>cache.filesystem.dir</em></p>
<ul>
<li>
<p>Directorio para el guardado de datos en cache. Esta propiedad
    solo se utiliza cuando la cache está habilitada y se utiliza el
    sistema <em>FileSystemDocumentCache</em>. Si se despliega el servicio
    en varios nodos, debería ser un directorio compartido por todos
    ellos.</p>
</li>
<li>
<p>Si no se indica, se almacenarán en el directorio temporal del
    usuario.</p>
</li>
</ul>
</li>
<li>
<p><em>share.sessions.enable</em></p>
<ul>
<li>
<p>Permite habilitar la compartición de sesiones en despliegues con
    varios nodos. Por defecto, esto sólo habilita al sistema para el
    uso de certificados en la nube. Para habilitarlo también para
    certificados locales hay que habilitar la propiedad
    "share.sessions.withcertificate.enable".</p>
</li>
<li>
<p>Por defecto:</p>
<ul>
<li>false</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>share.sessions.withcertificate.enable</em></p>
<ul>
<li>
<p>Habilitar la compartición de sesiones para el uso de
    certificados locales con varios nodos. Requiere que se habilite
    también la propiedad "share.sessions.enable".</p>
</li>
<li>
<p>Por defecto:</p>
<ul>
<li>true</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>share.sessions.dir</em></p>
<ul>
<li>
<p>Ruta absoluta del directorio en el que se almacenaran las
    sesiones compartidas. Debe ser accesible por todos los nodos del
    despliegue.</p>
</li>
<li>
<p>Si no se indica, se almacenarán en el directorio temporal del
    usuario.</p>
</li>
</ul>
</li>
<li>
<p><em>share.sessions.requeststoclean</em></p>
<ul>
<li>
<p>Número de peticiones que se admiten hasta iniciar la limpieza
    del almacén de sesiones compartidas.</p>
</li>
<li>
<p>Por defecto:</p>
<ul>
<li>1000</li>
</ul>
</li>
</ul>
</li>
<li>
<p><em>signfolder.ws.username</em></p>
<ul>
<li>
<p>Nombre de usuario para el acceso al <em>web service</em> del
    Portafirmas en caso de que se le haya establecido un
    usuario/contraseña del acceso.</p>
</li>
<li>
<p>Si no se indica, no se agregará la cabecera de seguridad para el
    acceso al servicio.</p>
</li>
</ul>
</li>
<li>
<p><em>signfolder.ws.password</em></p>
<ul>
<li>
<p>Contraseña de acceso al <em>web service</em> del Portafirmas en caso de
    que se le haya establecido un usuario/contraseña del acceso.</p>
</li>
<li>
<p>Si no se indica, no se agregará la cabecera de seguridad para el
    acceso al servicio.</p>
</li>
</ul>
</li>
</ul>
<h3 id="configuracion-de-los-logs">Configuración de los logs</h3>
<p>El servicio proxy utiliza la biblioteca SLF4J como fachada para la
gestión de los logs e incluye las bibliotecas de Logback para imprimir
los logs a través de este <em>framework</em>.</p>
<p>Por defecto los logs de la aplicación se imprimirán junto al resto de
logs del servidor de aplicaciones, pero se puede alterar este
comportamiento configurando el <em>framework</em> de logs. En el caso de
Logback, se puede utilizar un fichero externo en el que se establezca la
configuración que se debe emplear. Se puede indicar a la aplicación cual
es el fichero de configuración proporcionando durante el arranque del
servicio la propiedad “logback.configurationFile” con la ruta del
fichero en cuestión. Por ejemplo:</p>
<p>-Dlogback.configurationFile=/opt/usuarios/portafirmas/proxy_logback.xml</p>
<p>Un ejemplo de fichero de configuración de Logback sería:</p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th><p>&lt;configuration&gt;</p>
<p>&lt;!-- Configuración del log --&gt;</p>
<p>  &lt;appender name="ROLLING"
class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;</p>
<p>    &lt;!-- Ruta del fichero de log --&gt;</p>
<p>    &lt;file&gt;RUTA_LOGS/proxy_log.txt&lt;/file&gt;</p>
<p>    &lt;!-- Rotado diario o por tamaño --&gt;</p>
<p>    &lt;rollingPolicy
class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"&gt;</p>
<p>      &lt;!-- Nombre del fichero de rotado --&gt;</p>
<p>      &lt;fileNamePattern&gt; proxy_log
-%d{yyyy-MM-dd}.%i.txt&lt;/fileNamePattern&gt;</p>
<p>       &lt;!-- Tamaño maximo de fichero de 50MB --&gt;</p>
<p>       &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;</p>
<p>       &lt;!-- Máximo de 20 ficheros totales --&gt;</p>
<p>       &lt;maxHistory&gt;20&lt;/maxHistory&gt;</p>
<p>       &lt;!-- Tamaño total no superior a 1GB --&gt;</p>
<p>       &lt;totalSizeCap&gt;1GB&lt;/totalSizeCap&gt;</p>
<p>    &lt;/rollingPolicy&gt;</p>
<p>    &lt;!-- Formato de las entradas de log --&gt;</p>
<p>    &lt;encoder&gt;</p>
<p>      &lt;pattern&gt; %d %-5level [%thread] %logger{0}: %msg%n
&lt;/pattern&gt;</p>
<p>    &lt;/encoder&gt;</p>
<p>  &lt;/appender&gt;</p>
<p>  &lt;!-- Nivel de log y configuración a aplicar --&gt;</p>
<p>  &lt;root level="info"&gt;</p>
<p>    &lt;appender-ref ref="ROLLING" /&gt;</p>
<p>  &lt;/root&gt;</p>
<p>&lt;/configuration&gt;</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

<p>Consulte la documentación de Logback para saber las opciones de
configuración que ofrece este framework: <a href="https://logback.qos.ch/">https://logback.qos.ch/</a></p>
<h4 id="configuracion-de-los-logs_1">Configuración de los logs</h4>
<p>Si un integrador tuviese interés en utilizar un <em>framework</em> de gestión
de logs distinto a Logback (Java Logging API, Log4J 2...), puede
modificar el WAR del servicio proxy eliminando las bibliotecas de
Logback y agregando las del <em>framework</em> que desee utilizar y la
biblioteca puente correspondiente para SLF4J. Consulte la documentación
de SLF4J para más información: <a href="https://www.slf4j.org/">https://www.slf4j.org/</a></p>
<h2 id="servicio-de-firma-trifasica">Servicio de firma trifásica</h2>
<p>El servicio de firma trifásica permite realizar los procesos de firma
del portafirmas móvil. Este servicio se encarga de obtener la
información que el usuario cifrara con su clave privada en su
dispositivo y compondrá la firma en servidor con el formato adecuado.</p>
<h3 id="configuracion-del-servicio_1">Configuración del servicio</h3>
<p>El servicio de firma trifásica se distribuye ya configurado para que
funcione correctamente con el Portafirmas móvil. Existe la posibilidad,
sin embargo, de configurar varias propiedades para ajustar su
comportamiento a nuestro despliegue. Para configurar el servicio se
utiliza el fichero tps_config.properties. Ese fichero se buscará en el
directorio configurado a través de la variable de entorno
<em>clienteafirma.config.path</em>. Si no se proporciona esta variable, se
buscará dentro del propio WAR del servicio
(afirma-server-triphase-signer.war), en el subdirectorio
“WEB-INF/classes”.</p>
<p>Para establecer el directorio de configuración, se podría proporcionar
la propiedad directamente al servidor de aplicaciones durante el
arranque. Por ejemplo:</p>
<p>-Dclienteafirma.config.path=/opt/usuarios/portafirmas/properties</p>
<p>De entre todas las propiedades de configuración que admite este
servicio, para los despliegues del Portafirmas móvil sólo se recomienda
modificar las siguientes:</p>
<ul>
<li>
<p><em>Access-Control-Allow-Origin</em></p>
<ul>
<li>
<p>Permite establecer el origen permitido de las peticiones. El
    servicio de firma trifásica agregará el valor de esta propiedad
    en las respuestas del servicio.</p>
</li>
<li>
<p>Si se establece como valor un asterisco (‘*’), se indica que se
    pueden realizar peticiones desde cualquier dominio.</p>
</li>
<li>
<p>Valor por defecto: *</p>
</li>
</ul>
</li>
<li>
<p><em>alternative.xmldsig</em></p>
<ul>
<li>
<p>Permite habilitar el modo de compatibilidad con bibliotecas de
    firma XML que puedan encontrarse en el <em>classpath</em> del servidor
    de aplicaciones. Este tipo de bibliotecas pueden interferir con
    las que incluye el propio Oracle Java e impedir realizar firmas
    XAdES. Ejemplos de bibliotecas que provocan estos errores son
    XERCES/XALAN.</p>
</li>
<li>
<p>Al indicar el valor true, se habilitará el modo de
    compatibilidad con estas bibliotecas, lo que obligará al
    servicio a buscar diversos paquetes de clases para encontrar un
    modo de completar las firmas.</p>
</li>
<li>
<p>No se garantiza la compatibilidad con todas las versiones de
    estas bibliotecas.</p>
</li>
<li>
<p>Valor por defecto: false</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>IMPORTANTE:</strong> Será necesario establecer a true esta propiedad cuando
se desplieguen los servicios sobre un servidor JBoss 6 o superior.</p>
</blockquote>
<p>&lt;<img src="media/image1.png"
style="width:0.91667in;height:0.32292in"
alt="Creative Commons License" /></p>
<p>Esta obra está bajo una licencia <a href="#Licencia_Creative_Commons">Creative Commons
Reconocimiento-NoComercial-CompartirIgual 3.0
Unported</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../PF_Manual_App_Portafirmas_iOS/" class="btn btn-neutral float-left" title="PF Manual App Portafirmas iOS"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Sintaxis_invocacion_Cliente_Afirma/" class="btn btn-neutral float-right" title="Sintaxis invocacion Cliente Afirma">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../PF_Manual_App_Portafirmas_iOS/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Sintaxis_invocacion_Cliente_Afirma/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
